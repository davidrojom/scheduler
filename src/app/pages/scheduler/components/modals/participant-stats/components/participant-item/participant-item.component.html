<div
  class="bg-gray-50 rounded-lg overflow-hidden cursor-pointer"
  [attr.id]="id"
  (click)="onToggleExpanded()"
  data-umami-event="toggle-participant-expanded"
>
  <div
    class="participant-header"
  >
    <div class="participant-content">
      <svg
        class="chevron-icon"
        [class.rotate-90]="participant.isExpanded"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9 5l7 7-7 7"
        />
      </svg>
      <div class="flex-1 min-w-0 overflow-hidden">
        <div class="font-medium text-gray-900 participant-name-wrapper">
          <span class="participant-name-scroll" schScrollableText>{{ participant.name }}</span>
        </div>
        <div class="participant-info">
          {{ participant.totalMinutes | formatTime }} â€¢
          {{ participant.tasks.length }} task{{
            participant.tasks.length !== 1 ? "s" : ""
          }}
        </div>
      </div>
    </div>
    <button
      type="button"
      class="delete-button"
      (click)="onDelete()"
      data-umami-event="delete-participant"
    >
      Delete
    </button>
  </div>

  @if (participant.isExpanded) {
  <div class="participant-expanded">
    @if (participant.tasks.length === 0) {
    <div class="py-4 text-sm text-gray-500 text-center">No tasks assigned</div>
    } @else {
    <div class="space-y-2 mt-3">
      @for (task of participant.tasks; track task.id) {
      <sch-task-list-item [task]="task" (remove)="onRemoveFromTask($event)" />
      }
    </div>
    }
  </div>
  }
</div>
